<project xmlns="http://maven.apache.org/POM/4.0.0"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

	<modelVersion>4.0.0</modelVersion>
	<groupId>com.datastax.academy</groupId>
	<artifactId>demo-graph</artifactId>
	<version>0.0.1-SNAPSHOT</version>
	<name>demo-dsegraph</name>

	<properties>
	  <junit.version>4.12</junit.version>
	  <dse-java-driver.version>1.6.8</dse-java-driver.version>
	  <maven-compiler-plugin.source>1.8</maven-compiler-plugin.source>
	  <maven-compiler-plugin.target>1.8</maven-compiler-plugin.target>
	  <maven-compiler-plugin.version>3.7.0</maven-compiler-plugin.version>
	  <maven-failsafe-plugin.version>2.22.0</maven-failsafe-plugin.version>
	</properties>

	<dependencies>
      <dependency>
	    <groupId>com.datastax.dse</groupId>
		<artifactId>dse-java-driver-core</artifactId>
		<version>${dse-java-driver.version}</version>
	  </dependency>
	  <dependency>
	    <groupId>com.datastax.dse</groupId>
		<artifactId>dse-java-driver-mapping</artifactId>
		<version>${dse-java-driver.version}</version>
	  </dependency>
	  <dependency>
	    <groupId>com.datastax.dse</groupId>
		<artifactId>dse-java-driver-extras</artifactId>
		<version>${dse-java-driver.version}</version>
	  </dependency>
	  <dependency>
	    <groupId>com.datastax.dse</groupId>
		<artifactId>dse-java-driver-graph</artifactId>
		<version>${dse-java-driver.version}</version>
	  </dependency>
	  <dependency>
	    <groupId>junit</groupId>
		<artifactId>junit</artifactId>
		<version>${junit.version}</version>
	  </dependency>
	</dependencies>

	<build>
	  <plugins>
	    <plugin>
		  <groupId>org.apache.maven.plugins</groupId>
		  <artifactId>maven-compiler-plugin</artifactId>
		  <version>${maven-compiler-plugin.version}</version>
		  <configuration>
		    <source>${maven-compiler-plugin.source}</source>
			<target>${maven-compiler-plugin.target}</target>
			<showWarnings>true</showWarnings>
		  </configuration>
		</plugin>

		<plugin>
		  <groupId>org.apache.maven.plugins</groupId>
		  <artifactId>maven-surefire-plugin</artifactId>
		  <version>2.10</version>
		  <configuration>
		    <skip>true</skip>
		  </configuration>
		</plugin>

		<plugin>
		  <groupId>org.apache.maven.plugins</groupId>
		  <artifactId>maven-failsafe-plugin</artifactId>
		  <version>${maven-failsafe-plugin.version}</version>
		  <executions>
		    <execution>
		      <goals>
			    <goal>integration-test</goal>
				<goal>verify</goal>
			  </goals>
			 </execution>
		  </executions>
		</plugin>

		<plugin>
		  <groupId>io.fabric8</groupId>
		  <artifactId>docker-maven-plugin</artifactId>
		  <version>0.26.0</version>
		  <executions>
		    <execution>
			  <id>start</id>
			  <phase>pre-integration-test</phase>
			  <goals><goal>start</goal></goals>
			  <configuration>
			  <images>
			   <image>
			    <alias>dse</alias>
				<name>datastax/dse-server:6.0.2</name>
				<run>
				 <entrypoint>
				  <exec>
				   <arg>/entrypoint.sh</arg>
				   <arg>dse</arg>
				   <arg>cassandra</arg>
				   <arg>-fsg</arg>
				  </exec>
				 </entrypoint>
				 <wait>
				  <log>DSE startup complete</log>
				  <time>90000</time>
				 </wait>
				 <env>
				  <DS_LICENSE>accept</DS_LICENSE>
				  <DC>dc1</DC>
				  <NUM_TOKENS>1</NUM_TOKENS>
				</env>
				<ports>
				 <port>9042:9042</port>
				 <port>8983:8983</port>
				 <port>7199:7199</port>
				</ports>
			   </run>
			  </image>
			 </images>
			</configuration>
		   </execution>
		   <execution>
		    <id>stop</id>
		    <phase>post-integration-test</phase>
			<goals>
			 <goal>stop</goal>
			</goals>
		   </execution>
		 </executions>
		</plugin>
		
		</plugins>
	</build>

</project>